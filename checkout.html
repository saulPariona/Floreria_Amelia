<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Amelia | Checkout</title>
  <link rel="icon" type="image/svg+xml" href="Imágenes/Inicio/Bellafiora_logo.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
  <link rel="stylesheet" href="CSS/inicio.css">
  <link rel="stylesheet" href="CSS/checkout.css">
  <link rel="stylesheet" href="CSS/auth.css">

  <script src="JS/auth.js" defer></script>
  <script src="JS/checkout-page.js" defer></script>
</head>

<!-- MODAL LOGIN / REGISTRO -->
<div class="auth-modal hidden" id="authModal">
  <div class="auth-modal-backdrop"></div>

  <div class="auth-modal-dialog">
    <button class="auth-close" id="authCloseBtn" type="button">
      <i class="fas fa-times"></i>
    </button>

    <h2 class="auth-title">Mi cuenta</h2>

    <div class="auth-tabs">
      <button class="auth-tab auth-tab-active" data-auth-tab="login">Iniciar sesión</button>
      <button class="auth-tab" data-auth-tab="signup">Crear cuenta</button>
    </div>

    <!-- LOGIN -->
    <form id="loginForm" class="auth-form auth-form-active">
      <div class="auth-group">
        <label for="loginEmail">Correo electrónico</label>
        <input type="email" id="loginEmail" placeholder="ejemplo@correo.com" required>
      </div>
      <div class="auth-group">
        <label for="loginPassword">Contraseña</label>
        <input type="password" id="loginPassword" placeholder="Tu contraseña" required>
      </div>
      <p class="auth-msg" id="loginMsg"></p>
      <button type="submit" class="auth-btn-primary">Entrar</button>
    </form>

    <!-- SIGN UP -->
    <form id="signupForm" class="auth-form">
      <div class="auth-group">
        <label for="signupName">Nombre completo</label>
        <input type="text" id="signupName" placeholder="Ej: María García López" required>
      </div>
      <div class="auth-group">
        <label for="signupEmail">Correo electrónico</label>
        <input type="email" id="signupEmail" placeholder="ejemplo@correo.com" required>
      </div>
      <div class="auth-group">
        <label for="signupPassword">Contraseña</label>
        <input type="password" id="signupPassword" placeholder="Mínimo 6 caracteres" required>
      </div>
      <p class="auth-msg" id="signupMsg"></p>
      <button type="submit" class="auth-btn-primary">Crear cuenta</button>
    </form>
  </div>
</div>


<body class="checkout-page">

  <!-- BANNER -->
  <div class="banner">
    <div class="banner-content">
      <div class="content-info">
        <p><i class="fa-solid fa-phone"></i> +52 (81 3686 5274)</p>
      </div>
      <p class="envio-express"><i class="fas fa-shipping-fast"></i> ¡Envíos express en Monterrey!</p>
      <div class="social-links">
        <a href="https://www.facebook.com/share/1H35dWxqw6/" class="btn-social-link"><i
            class="fa-brands fa-facebook"></i></a>
        <a href="https://www.instagram.com/bellafioramty?igsh=MW5zd25jbzZoNHFjeA==" class="btn-social-link"><i
            class="fa-brands fa-instagram"></i></a>
      </div>
    </div>
  </div>

  <!-- HEADER -->
  <header>
    <input type="checkbox" id="toggler">
    <label for="toggler" class="fas fa-bars"></label>
    <a href="index.html" class="logofloreria"><img src="Imágenes/Inicio/Bellafiora_logo.png" alt="Bellafiora"></a>

    <nav class="navbar">
      <a href="index.html#home">Inicio</a>
      <a href="index.html#about">Nosotros</a>
      <div class="dropdown">
        <a href="index.html#catalogo" class="dropdown-btn">Arreglos Florales</a>
        <div class="dropdown-content">
          <a href="#">San Valentín</a>
          <a href="#">San Valentín</a>
        </div>
      </div>
      <a href="index.html#Contacto">Contacto</a>
    </nav>

    <div class="icons">
      <a id="cart-icon" href="carrito.html" class="fas fa-shopping-cart" aria-label="Carrito">
        <span id="cartBadge"></span>
      </a>
      <a href="#" class="fas fa-user" aria-label="Cuenta" id="headerUserBtn"></a>
      <span id="headerUserLabel" style="display:none; font-size:1.4rem; margin-left:0.5rem;"></span>
      <button id="logoutBtn"
        style="display:none; font-size:1.2rem; margin-left:0.5rem; background:none; border:none; cursor:pointer;">
        Cerrar sesión
      </button>
    </div>


  </header>

  <!-- CHECKOUT MAIN -->
  <main class="checkout-main">
    <div class="checkout-container">

      <!-- PROGRESS STEPS -->
      <div class="checkout-progress">
        <div class="progress-step active" data-step="1">
          <div class="step-number">1</div>
          <span class="step-label">Información</span>
        </div>
        <div class="progress-line"></div>
        <div class="progress-step" data-step="2">
          <div class="step-number">2</div>
          <span class="step-label">Entrega</span>
        </div>
        <div class="progress-line"></div>
        <div class="progress-step" data-step="3">
          <div class="step-number">3</div>
          <span class="step-label">Pago</span>
        </div>
      </div>

      <div class="checkout-grid">
        <!-- LEFT COLUMN: FORMS -->
        <div class="checkout-forms">

          <!-- STEP 1: INFORMACIÓN PERSONAL -->
          <section class="checkout-section active" data-section="1">
            <div class="section-header">
              <h2><i class="fas fa-user"></i> Información Personal</h2>
              <p>Completa tus datos para continuar</p>
            </div>
            <form class="checkout-form" id="formPersonal">
              <div class="form-row">
                <div class="form-group">
                  <label for="nombre">Nombre completo <span class="required">*</span></label>
                  <input type="text" id="nombre" name="nombre" required placeholder="Ej: María García López">
                </div>
              </div>

              <div class="form-row two-cols">
                <div class="form-group">
                  <label for="email">Correo electrónico <span class="required">*</span></label>
                  <input type="email" id="email" name="email" required placeholder="ejemplo@correo.com">
                </div>
                <div class="form-group">
                  <label for="telefono">Teléfono <span class="required">*</span></label>
                  <input type="tel" id="telefono" name="telefono" required placeholder="81 1234 5678">
                </div>
              </div>

              <div class="form-group">
                <label for="mensaje">Mensaje para la tarjeta (opcional)</label>
                <textarea id="mensaje" name="mensaje" rows="3" maxlength="200"
                  placeholder="Escribe un mensaje personalizado para tu arreglo floral..."></textarea>
                <small class="char-count"><span id="charCount">0</span>/200 caracteres</small>
              </div>

              <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="window.location.href='carrito.html'">
                  <i class="fas fa-arrow-left"></i> Volver al carrito
                </button>
                <button type="submit" class="btn btn-primary">
                  Continuar <i class="fas fa-arrow-right"></i>
                </button>
              </div>
            </form>
          </section>

          <!-- STEP 2: INFORMACIÓN DE ENTREGA -->
          <section class="checkout-section" data-section="2">
            <div class="section-header">
              <h2><i class="fas fa-truck"></i> Información de Entrega</h2>
              <p>¿Dónde quieres recibir tu pedido?</p>
            </div>
            <form class="checkout-form" id="formEntrega">

              <div class="delivery-options">
                <label class="delivery-option">
                  <input type="radio" name="deliveryType" value="home" checked>
                  <div class="option-card">
                    <i class="fas fa-home"></i>
                    <div>
                      <strong>Entrega a Segura e immediata</strong>
                      <span>Envío express en Monterrey</span>
                    </div>
                    <span class="price">$89</span>
                  </div>
                </label>
                <label class="delivery-option">
                  <input type="radio" name="deliveryType" value="pickup">
                  <div class="option-card">
                    <i class="fas fa-store"></i>
                    <div>
                      <strong>Recoger en tienda</strong>
                      <span>Gratis - Ruperto Martínez 1413-Pte</span>
                    </div>
                    <span class="price">$0</span>
                  </div>
                </label>
              </div>

              <div id="addressFields">
                <div class="form-group">
                  <label for="calle">Calle y número <span class="required">*</span></label>
                  <input type="text" id="calle" name="calle" required placeholder="Ej: Av. Constitución 123">
                </div>

                <div class="form-row two-cols">
                  <div class="form-group">
                    <label for="colonia">Colonia <span class="required">*</span></label>
                    <input type="text" id="colonia" name="colonia" required placeholder="Ej: Centro">
                  </div>
                  <div class="form-group">
                    <label for="cp">Código Postal <span class="required">*</span></label>
                    <input type="text" id="cp" name="cp" required placeholder="64000" maxlength="5">
                  </div>
                </div>

                <div class="form-row two-cols">
                  <div class="form-group">
                    <label for="ciudad">Ciudad <span class="required">*</span></label>
                    <input type="text" id="ciudad" name="ciudad" value="Monterrey" required>
                  </div>
                  <div class="form-group">
                    <label for="estado">Estado <span class="required">*</span></label>
                    <input type="text" id="estado" name="estado" value="Nuevo León" required>
                  </div>
                </div>

                <div class="form-group">
                  <label for="referencias">Referencias de entrega (opcional)</label>
                  <input type="text" id="referencias" name="referencias" placeholder="Ej: Casa blanca con portón negro">
                </div>

                <div class="form-group">
                  <label for="fechaEntrega">Fecha de entrega <span class="required">*</span></label>
                  <input type="date" id="fechaEntrega" name="fechaEntrega" required>
                </div>

                <div class="form-group">
                  <label for="horaEntrega">Horario preferido <span class="required">*</span></label>
                  <select id="horaEntrega" name="horaEntrega" required>
                    <option value="">Selecciona un horario</option>
                    <option value="9-12">9:00 AM - 12:00 PM</option>
                    <option value="12-15">12:00 PM - 3:00 PM</option>
                    <option value="15-18">3:00 PM - 6:00 PM</option>
                  </select>
                </div>
              </div>

              <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="backToStep1">
                  <i class="fas fa-arrow-left"></i> Atrás
                </button>
                <button type="submit" class="btn btn-primary">
                  Continuar <i class="fas fa-arrow-right"></i>
                </button>
              </div>
            </form>
          </section>

          <!-- STEP 3: MÉTODO DE PAGO -->
          <section class="checkout-section" data-section="3">
            <div class="section-header">
              <h2><i class="fas fa-credit-card"></i> Método de Pago</h2>
              <p>Elige cómo quieres pagar tu pedido</p>
            </div>
            <form class="checkout-form" id="formPago">

              <div class="payment-methods">
                <label class="payment-method">
                  <input type="radio" name="paymentMethod" value="transferencia" checked>
                  <div class="method-card">
                    <i class="fas fa-university"></i>
                    <div class="method-info">
                      <strong>Transferencia bancaria</strong>
                      <span>BBVA, Banorte, HSBC</span>
                    </div>
                  </div>
                </label>

                <label class="payment-method">
                  <input type="radio" name="paymentMethod" value="efectivo">
                  <div class="method-card">
                    <i class="fas fa-money-bill-wave"></i>
                    <div class="method-info">
                      <strong>Pago contra entrega</strong>
                      <span>Efectivo o terminal al recibir</span>
                    </div>
                  </div>
                </label>

                <label class="payment-method">
                  <input type="radio" name="paymentMethod" value="tarjeta">
                  <div class="method-card">
                    <i class="fas fa-credit-card"></i>
                    <div class="method-info">
                      <strong>Tarjeta de crédito/débito</strong>
                      <span>Visa, Mastercard, American Express</span>
                    </div>
                  </div>
                </label>
              </div>

              <div id="cardFields" style="display: none;">
                <div class="form-group">
                  <label for="cardNumber">Número de tarjeta <span class="required">*</span></label>
                  <input type="text" id="cardNumber" name="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
                </div>

                <div class="form-row two-cols">
                  <div class="form-group">
                    <label for="cardExpiry">Fecha de expiración <span class="required">*</span></label>
                    <input type="text" id="cardExpiry" name="cardExpiry" placeholder="MM/AA" maxlength="5">
                  </div>
                  <div class="form-group">
                    <label for="cardCvv">CVV <span class="required">*</span></label>
                    <input type="text" id="cardCvv" name="cardCvv" placeholder="123" maxlength="4">
                  </div>
                </div>

                <div class="form-group">
                  <label for="cardName">Nombre del titular <span class="required">*</span></label>
                  <input type="text" id="cardName" name="cardName" placeholder="Como aparece en la tarjeta">
                </div>
              </div>

              <div id="transferenciaInfo" class="info-box">
                <i class="fas fa-info-circle"></i>
                <div>
                  <strong>Datos para transferencia</strong>
                  <p>Recibirás los datos bancarios por correo para completar tu pago. El pedido se procesará una vez
                    confirmemos tu transferencia.</p>
                </div>
              </div>

              <div class="terms-checkbox">
                <label>
                  <input type="checkbox" id="termsAccept" required>
                  <span>Acepto los <a href="#" target="_blank">términos y condiciones</a> y la <a href="#"
                      target="_blank">política de privacidad</a></span>
                </label>
              </div>

              <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="backToStep2">
                  <i class="fas fa-arrow-left"></i> Atrás
                </button>
                <button type="submit" class="btn btn-primary btn-large">
                  <i class="fas fa-check-circle"></i> Confirmar pedido
                </button>
              </div>
            </form>
          </section>

        </div>

        <!-- RIGHT COLUMN: RESUMEN -->
        <aside class="checkout-summary">
          <div class="summary-card">
            <h3><i class="fas fa-shopping-bag"></i> Resumen del pedido</h3>

            <div class="summary-items" id="summaryItems">
              <!-- Los productos se cargarán desde localStorage -->
            </div>

            <div class="summary-coupon">
              <input type="text" placeholder="Código de descuento" id="couponInput">
              <button type="button" class="btn-coupon" id="applyCoupon">Aplicar</button>
            </div>

            <div class="summary-totals">
              <div class="total-row">
                <span>Subtotal</span>
                <span id="summarySubtotal">$0.00</span>
              </div>
              <div class="total-row">
                <span>Envío</span>
                <span id="summaryShipping">$0.00</span>
              </div>
              <div class="total-row discount-row" id="discountRow" style="display: none;">
                <span>Descuento</span>
                <span id="summaryDiscount">-$0.00</span>
              </div>
              <div class="total-row grand-total">
                <span>Total</span>
                <span id="summaryTotal">$0.00</span>
              </div>
            </div>

            <div class="security-badges">
              <div class="badge-item">
                <i class="fas fa-shield-halved"></i>
                <span>Pago seguro</span>
              </div>
              <div class="badge-item">
                <i class="fas fa-truck-fast"></i>
                <span>Envío rápido</span>
              </div>
              <div class="badge-item">
                <i class="fas fa-award"></i>
                <span>Garantía de calidad</span>
              </div>
            </div>
          </div>

          <div class="help-card">
            <i class="fas fa-headset"></i>
            <div>
              <strong>¿Necesitas ayuda?</strong>
              <p>Llámanos al <a href="tel:+528136865274">81 3686 5274</a></p>
            </div>
          </div>
        </aside>

      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="checkout-footer">
    <div class="footer-content">
      <p>© 2026 Florería. Hecho con ❤️ en Huancayo.</p>
      <div class="footer-links">
        <a href="#">Términos y condiciones</a>
        <a href="#">Política de privacidad</a>
        <a href="#">Política de devoluciones</a>
      </div>
    </div>
  </footer>

  <!-- MODAL DE CONFIRMACIÓN -->
  <div class="modal" id="confirmModal">
    <div class="modal-content">
      <div class="modal-success">
        <i class="fas fa-check-circle"></i>
        <h2>¡Pedido confirmado!</h2>
        <p>Gracias por tu compra. Hemos recibido tu pedido <strong>#<span id="orderNumber"></span></strong></p>
        <p>Te hemos enviado un correo de confirmación a <strong id="confirmEmail"></strong></p>
        <div class="modal-actions">
          <button class="btn btn-primary" onclick="window.location.href='index.html'">
            Volver al inicio
          </button>
          <button class="btn btn-secondary" onclick="window.print()">
            <i class="fas fa-print"></i> Imprimir confirmación
          </button>
        </div>
      </div>
    </div>
  </div>

</body>

</html>